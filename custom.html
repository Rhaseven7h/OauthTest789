<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>The HTML5 Herald</title>
		<meta name="description" content="The HTML5 Herald">
		<meta name="author" content="SitePoint">
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
		<script type="text/javascript" src="jso.js"></script>
	</head>
	<body>
		<button id="doClick">Click Me!</button>
		<br/>
		<button id="doLogout">Log Me Out!</button>
		<hr/>
		<script type="text/javascript">
			jQuery(document).ready(function(){	
				JSO.enablejQuery($);

				var jso = new JSO({
					providerID: "google",
					client_id: "298541620163-smq90ihen3h0h82rlb90ooo0u88j0col.apps.googleusercontent.com",
					redirect_uri: "http://rhaseven7h.github.io/OauthTest789/custom.html",
					authorization: "https://accounts.google.com/o/oauth2/auth",
					scopes: { request: ["https://www.googleapis.com/auth/userinfo.profile"]},
					debug: true
				});

				jso.callback();

				function doLogout() {
					jso.wipeTokens();
				}

				function doButton() {
					jso.ajax({
						url: "https://www.googleapis.com/oauth2/v1/userinfo",
						oauth: {
							scopes: {
								request: ["https://www.googleapis.com/auth/userinfo.email"],
								require: ["https://www.googleapis.com/auth/userinfo.email"]
							}
						},
						dataType: 'json',
						success: function(data) {
							console.log("Response (google):");
							console.log(data);
							jQuery("body").append(jQuery("<img src='"+data.picture+"' />"));
							$(".loader-hideOnLoad").hide();
						}
					});
				}

				jQuery("#doClick").click(doButton);
			});
		</script>
	</body>
</html>

